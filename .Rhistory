}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
plot(ttTrial)
abline(h=.05)
bootN <- 2000
trialN <- 100
sizeN <- 80
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
mean(y)
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN, mean=2)
y <- z
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
?rnorm
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN, sd=.1)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
ttTrial
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN, sd=.1)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN, sd=2)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN, sd=1.4)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN, sd=1.2)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
plot(ttTrial)
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
typeIavg
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
cat(typeIavg)
cat(typeIavg); cat(typeIavg)
?cat
cat(typeIavg, sep="\n"); cat(typeIavg)
for (k in 1:50){
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
cat(typeIavg, sep="\n")
}
for (k in 1:50){
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
for (i in 1:trialN){
z <- rnorm(sizeN)
y <- exp(z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl, var.equal=TRUE)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
cat(typeIavg, sep="\n")
}
}
for (k in 1:50){
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
shape <- "norm"
for (i in 1:trialN){
z <- rnorm(sizeN, sd=2)
y <- ifelse(shape=="lognorm", exp(z), z)
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl, var.equal=TRUE)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
cat(typeIavg, sep="\n")
}
?ifelse
for (k in 1:50){
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
shape <- "norm"
for (i in 1:trialN){
z <- rnorm(sizeN, sd=2)
if(shape=="lognorm") y<-exp(z) else y<-z
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl, var.equal=TRUE)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
cat(typeIavg, sep="\n")
}
for (k in 1:50){
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
shape <- "norm"
for (i in 1:trialN){
z <- rnorm(sizeN, sd=.5)
if(shape=="lognorm") y<-exp(z) else y<-z
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl, var.equal=TRUE)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
cat(typeIavg, sep="\n")
}
for (k in 1:50){
bootN <- 2000
trialN <- 100
sizeN <- 50
ttBoot <- rep(NA, bootN)
ttTrial <- rep(NA, trialN)
shape <- "norm"
for (i in 1:trialN){
z <- rnorm(sizeN, sd=.1)
if(shape=="lognorm") y<-exp(z) else y<-z
for (j in 1:bootN){
x <- sample(1:sizeN, sizeN/2)
y_trt <- y[x]
y_ctrl <- y[-x]
ttBoot[j] <- t.test(y_trt, y_ctrl, var.equal=TRUE)$p.value
}
ttTrial[i] <- sum(ttBoot < 0.05)/bootN
}
typeIavg <- sum(ttTrial>.05)/trialN
cat(typeIavg, sep="\n")
}
5/6
installed.packages(haven)
installed.packages("haven")
library(haven)
hivsetpract <- read_dta("~/jData/jDoctrina/2018EPI_Wengen/CausalInference/data/hivsetpract.dta")
View(hivsetpract)
256*52/(128*564)
256*180/(820*128)
(8+216/9)/64
216/9
216/720
48/80
library(haven)
dataset <- read_sav(NULL)
View(dataset)
library(haven)
hivsetpract <- read_dta("~/jData/jBibliotheca/2018_EPIwengen/CausalInference/data/hivsetpract.dta")
View(hivsetpract)
View(hivsetpract)
library(dplyr)
View(hivsetpract)
hivsetpract %>% arrange(id)
hivsetpract %<>% arrange(id)
library(tidyr)
hivsetpract %<>% arrange(id)
library(dplyr)
library(magrittr)
hivsetpract <- read_dta("~/jData/jBibliotheca/2018_EPIwengen/CausalInference/data/hivsetpract.dta")
hivsetpract %<>% arrange(id)
hivsetpract %<>% arrange(id, month)
summary(hivsetpract)
hivsetpract %>% filter(id %in% c(95001, 95002))
View(hivsetpract)
ggplot(subset(hivsetpract, id %in% c(95001, 95002)),
aes(x=month,
y=cd4_0,
color=id))+
geom_point()
library(ggplot2)
ggplot(subset(hivsetpract, id %in% c(95001, 95002)),
aes(x=month,
y=cd4_0,
color=id))+
geom_point()
ggplot(subset(hivsetpract, id %in% c(95001, 95002)),
aes(x=month,
y=cd4_v,
color=id))+
geom_point()
ggplot(subset(hivsetpract, id %in% c(95001, 95002)),
aes(x=month,
y=cd4_v,
color=as.factor(id)))+
geom_point()
ggplot(subset(hivsetpract, id %in% c(95001, 95002)),
aes(x=month,
y=cd4_v,
color=as.factor(id)))+
geom_point() + labs(col="id")
hivsetpract %>% unique(cd4_0)
?unique
library(data.table)
hivsetpract %>% unique(cd4_0)
?unique
hivsetpract %>% unique(by=cd4_0)
hivsetpract %>% ungroup() %>% unique(by=cd4_0)
hivsetpract %>% data.table() %>% unique(by=cd4_0)
hivsetpract %>% data.table() %>% unique(by=cd4_0_cat)
hivsetpract %>% unique(by=cd4_0_cat)
hivsetpract %>% data.table() %>% unique(by=cd4_0_cat)
hivsetpract %>% data.table() %>% View()
hivsetpract %>% unique(by="cd4_0")
hivsetpract %>% unique(by="cd4_0_cat")
hivsetpract %>% data.table() %>% unique(by="cd4_0_cat")
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% ungroup() %>% unique(by="cd4_0_cat")
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% data.table() %>% unique(by="cd4_0_cat")
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% data.table() %>% arrange(cd4_0_cat) %>% unique(by="cd4_0_cat")
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% data.table() %>% arrange(cd4_0_cat) %>% unique(by="cd4_0_cat")
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% arrange(cd4_0_cat) %>%
data.table() %>% unique(by="cd4_0_cat")
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>% summarise()
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>% summarise_all()
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% summarise_all()
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% summarise()
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>% summarise(range)
?summarise
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>% summarise(min, max)
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>% summarise(min(), max())
min(hivsetpract$cd4_0)
max(hivsetpract$cd4_0)
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>%
summarise(ll = min(cd4_0),
ul = max(cd4_0))
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>%
summarise_all(min(), max())
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>%
summarise(ll = min(cd4_0),
ul = max(cd4_0))
library(survival)
?coxph
coxph(Surv(month, death))
coxph(Surv(month, death) ~ art, hivsetpract)
hivsetpract %<>% mutate(monthCox = month+1)
coxph(Surv(monthCox, death) ~ art, hivsetpract)
hivsetpract %<>% group_by(id) %>% filter(max(month)) %>% ungroup()
hivsetpract %<>% group_by(id) %>% arrange(month) %>% slice(n()) %>% ungroup()
coxph(Surv(month, death) ~ art, hivsetpract)
coxph(Surv(monthCox, death) ~ art, hivsetpract)
names(hivsetpract)
5785+772
exp(-1.380)
1/exp(-1.380)
?coxph
?Surv
coxph(Surv(time=month, event=death) ~ art, hivsetpract)
View(hivsetpract)
coxph(Surv(monthCox, death) ~ as.factor(art), hivsetpract)
class(hivsetpract$art)
coxph(Surv(monthCox, death) ~ factor(art), hivsetpract)
hivsetpract <- read_dta("~/jData/jBibliotheca/2018_EPIwengen/CausalInference/data/hivsetpract.dta")
hivsetpract %<>% arrange(id, month)
hivsetpract %>% filter(id %in% c(95001, 95002))
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>%
summarise(ll = min(cd4_0),
ul = max(cd4_0))
ggplot(subset(hivsetpract, id %in% c(95001, 95002)),
aes(x=month,
y=cd4_v,
color=as.factor(id)))+
geom_point() + labs(col="id")
hivsetpract %<>% mutate(monthCox = month+1)
### Select the last record of each id
hivsetpract %<>% group_by(id) %>% arrange(month) %>% slice(n()) %>% ungroup()
hivsetpract <- read_dta("~/jData/jBibliotheca/2018_EPIwengen/CausalInference/data/hivsetpract.dta")
hivsetpract %<>% arrange(id, month)
hivsetpract %>% filter(id %in% c(95001, 95002))
hivsetpract %>% select(cd4_0, cd4_0_cat) %>% group_by(cd4_0_cat) %>%
summarise(ll = min(cd4_0),
ul = max(cd4_0))
ggplot(subset(hivsetpract, id %in% c(95001, 95002)),
aes(x=month,
y=cd4_v,
color=as.factor(id)))+
geom_point() + labs(col="id")
hivsetpract %<>% mutate(monthCox = month+1)
coxph(Surv(time=month, event=death) ~ art + cluster(id), hivsetpract)
hivsetpract %<>% group_by(id) %>% arrange(month) %>% slice(n()) %>% ungroup()
### It seems to give rather different estimates than stata
coxph(Surv(time=month, event=death) ~ art, hivsetpract)
coxph(Surv(time=month, event=death) ~ art + cluster(id), hivsetpract)
View(hivsetpract)
q()
q()
10*10*10
q()
q()
1728/2
1728/4
1728/8
1728/18
1728/16
1728/32
1728/64
install.packages("biDAG")
install.packages("BiDAG")
install.packages("graph")
654/20
491/20
?serve.site
library(blogdown)
devtools::install_github("rstudio/blogdown")
library(blogdown)
install_hugo()
setwd("~/jData/jLibellus/entryFiles")
?serve_site
setwd("~/jData/jLibellus/entryFiles/annlia.github.io/")
serve_site()
servr::daemon_stop("4460097928")
